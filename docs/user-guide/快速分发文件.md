# 1 快速分发文件

简介

快速分发文件就是在服务树节点下，在服务器之间同步数据，源数据也可以是用户上传的文件。

## 1.1 前置条件

要使用快速执行脚本功能需要两个条件： 1.机器列表;2.AGENT安装

· 机器列表的两个来源

A)来自服务树资源管理。

B)来自机器管理。

· AGENT安装涉及到AGENT安装和管理。

## 1.2 功能介绍

页面路径：【快速执行】->【分发文件】

页面介绍

![](/attachments/20250706232245_wps68.jpg)

I)作业名称

默认生成，也可以进行修改，在执行历史中可以通过名称查找。

II)源文件

源文件有三种选择：

A)共享文件

![](/attachments/20250706232245_wps69.jpg)

文件管理是针对单一服务树，用户可以通过页面或者命令行方式上传文件。

共享文件存储在OPEN-C3的服务器上，如果是集群版，会存储在一个网络文件系统中。

共享文件可以在该页面上传，也可以到文件管理页面进行管理。

B)源服务器文件

文件在某个或者多个机器上，选择文件所在机器IP和文件路径。

源机器可以是多个，同步过程会多对多进行进行同步。

C)构建文件

选择构建文件，说明文件来自于流水线中的构建文件。

可以先忽略，在流水线中再进行详解。

III)目标路径

目标路径以"/"结尾代表一个目录，文件会同步到该目录下，如果不是"/"结尾代表文件路径，这个就是最终的文件名。

目标路径中如果不存，系统会自动创建。

IV)同步delete

如果源路径和目标路径都为"/"结尾，表示目录之间的同步。 “同步delete”打开时，会删除目标路径多出来的文件。

V) 执行账户

同步操作使用的执行用户，旁边的添加按钮可以添加用户。也可以到账户管理中进行管理。

添加用户并不会在远程机器上进行用户创建，只是一个本地的管理。

VI)目标机器

![](/attachments/20250706232245_wps70.jpg)

目标机器的两种类型：

· 直接勾选对应的IP。

· 选择机器分组中的机器组。

VII)文件所属者

等同于通过chown在远程服务器上修改文件所属。用户列表管理方式同上述“执行账户”。

VIII）文件权限

等同于在远程机器上通过chmod修改文件属性， 此处可以写755。

IX）超时时间

超时时间，单位为秒。超时后如果未运行结束，会失败退出。

X)其他开关

这里的“生产环境”，“生效动作”，“分批”三个开关可以先忽略，在流水线中再展开讲解，此处先都默认选择“总是执行”。

执行

![](/attachments/20250706232245_wps71.jpg)

查看执行历史

页面路径: 【执行历史】->【作业任务】

![](/attachments/20250706232245_wps72.jpg)